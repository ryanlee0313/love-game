<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>å‘Šç™½å°éŠæˆ²</title>
  <style>
    body { font-family: sans-serif; text-align: center; background: #fdf6f6; color: #333; }
    .question { font-size: 1.4em; margin: 20px 0; }
    .btn { display: inline-block; padding: 10px 20px; margin: 10px; border: 2px solid #333;
           border-radius: 8px; cursor: pointer; background: #fff; transition: background 0.2s; }
    .btn:hover { background: #fdd; }
    .lives { margin: 20px 0; font-weight: bold; color: crimson; }
    .end { margin-top: 30px; font-size: 1.5em; color: darkgreen; }
  </style>
</head>
<body>
  <h1>ğŸ’– èƒ½ä¸èƒ½æ‹¿åˆ°ç¬¬äºŒå€‹ç¦®ç‰©å°±çœ‹ä½ è‡ªå·±äº† ğŸ’–</h1>
  <div class="lives">å‰©é¤˜äº‚ç­”æ¬¡æ•¸ï¼š<span id="lives">3</span></div>
  <div class="question" id="question"></div>
  <div>
    <button class="btn" id="optA"></button>
    <button class="btn" id="optB"></button>
  </div>
  <div class="end" id="end"></div>

  <script>
    // é¡Œç›®
    const QUESTIONS = [
      { q: "æƒ³è¦ç¬¬äºŒå€‹ç¦®ç‰©å—", a:["è€ƒæ…®ä¸€ä¸‹","çœ‹ä½ çš„è¡¨ç¾"] , correct:1 },
      { q: "ç¬¬ä¸€æ¬¡è¦‹é¢æˆ‘å€‘åœ¨å“ªè£¡ï¼Ÿ", a:["æ–°å·¦ç‡Ÿç«™","å·¦ç‡Ÿç«™"], correct:0 },
      { q: "ä»Šå¤©æ˜¯ç”šéº¼æ—¥å­", a:["æå°å¯¶çš„ç”Ÿæ—¥","ä¸–ç•Œæ„›æ„›æ—¥"], correct:1 },
      { q: "æˆ‘å€‘èªè­˜å¤šä¹…ç¬¬ä¸€æ¬¡ç´„æœƒ", a:["20å¤©","27å¤©"], correct:0 },
      { q: "æå°å¯¶çš„é–‹å­¸å¹³å‡å°»å°»é »ç‡", a:["åŠå¤©ä¸€æ¬¡","å…©å¤©ä¸€æ¬¡"], correct:1 },
      { q: "èª°æ¯”è¼ƒå¸¥", a:["æå°å¯¶","è»ŠéŠ€å„ª"], correct:1 },
      { q: "æå°å¯¶æ˜¯ç”¨å“ªéš»æ‰‹å°»å°»", a:["å·¦æ‰‹","å³æ‰‹"], correct:0 },
      { q: "æå°å¯¶æœƒä¸æœƒä¹–ä¹–", a:["ä¸€å®šæœƒå¾ˆä¹–ä¹–","æœƒå¾ˆä¹–ä¹–"], correct:0 },
      { q: "ä»¥å¾Œåµæ¶èª°å°", a:["å€©å¯¶","ææƒ³æˆæ‰¾æ­»å—å“ªä¾†çš„ç¬¬äºŒå€‹é¸é …"], correct:0 },
      { q: "æŠ½åˆ°ä¸€æ¨£çš„ç¦®ç‰©æ€éº¼è¾¦", a:["è·Ÿç¬¬äºŒå€‹ç¦®ç‰©æ²’ç·£","å†æŠ½ä¸€æ¬¡"] , correct:1 }
    ];

    let lives = 3;
    let idx = 0;

    const qEl = document.getElementById('question');
    const aBtn = document.getElementById('optA');
    const bBtn = document.getElementById('optB');
    const livesEl = document.getElementById('lives');
    const endEl = document.getElementById('end');

    // ====== éŸ³æ•ˆï¼šç”¨ Web Audio API ç”¢ç”Ÿï¼ˆå…é¡å¤–æª”æ¡ˆï¼‰ ======
    const AudioKit = (() => {
      let ctx;
      function getCtx(){
        if(!ctx) ctx = new (window.AudioContext || window.webkitAudioContext)();
        return ctx;
      }
      function beep({freq=880, duration=0.18, type='sine', volume=0.3}){
        const c = getCtx();
        const o = c.createOscillator();
        const g = c.createGain();
        o.type = type; o.frequency.value = freq;
        g.gain.value = volume;
        o.connect(g); g.connect(c.destination);
        const now = c.currentTime;
        // ç°¡å–®çš„åŒ…çµ¡ç·šï¼ˆé¿å…çˆ†éŸ³ï¼‰
        g.gain.setValueAtTime(0, now);
        g.gain.linearRampToValueAtTime(volume, now + 0.02);
        g.gain.exponentialRampToValueAtTime(0.0001, now + duration);
        o.start(now);
        o.stop(now + duration + 0.02);
      }
      function correct(){
        // å…©è²ä¸Šæ»‘çš„å¯æ„›æç¤ºéŸ³
        beep({freq: 740, duration: 0.12, type:'sine', volume:0.25});
        setTimeout(()=>beep({freq: 988, duration: 0.16, type:'sine', volume:0.25}), 120);
        if (navigator.vibrate) navigator.vibrate(20);
      }
      function wrong(){
        // ä½é »å—¡é³´ + è¡°æ¸›ï¼ŒåƒéŒ¯èª¤æç¤º
        beep({freq: 220, duration: 0.22, type:'square', volume:0.2});
        setTimeout(()=>beep({freq: 180, duration: 0.18, type:'square', volume:0.18}), 120);
        if (navigator.vibrate) navigator.vibrate([40, 60, 40]);
      }
      return { correct, wrong };
    })();

    function render(){
      if(idx >= QUESTIONS.length){
        qEl.textContent = "éå¸¸å¥½";
        aBtn.style.display = bBtn.style.display = 'none';
        endEl.textContent = "å†æŠ½ä¸€å€‹ç¦®ç‰©å§ğŸ’";
        return;
      }
      qEl.textContent = QUESTIONS[idx].q;
      aBtn.textContent = QUESTIONS[idx].a[0];
      bBtn.textContent = QUESTIONS[idx].a[1];
    }

    function answer(choice){
      if(choice === QUESTIONS[idx].correct){
        AudioKit.correct();
        idx++;
        render();
      } else {
        AudioKit.wrong();
        lives--;
        livesEl.textContent = lives;
        if(lives <= 0){
          qEl.textContent = "ğŸ’” ä½ åœ¨äº‚ç­”!";
          aBtn.style.display = bBtn.style.display = 'none';
          endEl.textContent = "ä½†æˆ‘é‚„æ˜¯è¦èªªâ€¦ç¬¬äºŒå€‹ç¦®ç‰©åŸæœ¬å°±æ˜¯ä½ çš„äº†ï¼ğŸ¥°";
        }
      }
    }

    aBtn.addEventListener('click', ()=>answer(0));
    bBtn.addEventListener('click', ()=>answer(1));

    render();
  </script>
</body>
</html>
